from common import call, wait
import bson
import time
import sys

wait()

cfg = '''000000000000000004000000bc0000001400000005000000746573743a6c6967687473001400000006000000746573743a63616d657261001800000007000000746573743a6c61756e647279000000001400000008000000746573743a687661630000001400000009000000746573743a646f6f72730000180000000a000000746573743a7765617468657200000000140000000c000000746573743a6d61696c000000140000000d000000746573743a63617400000000140000000e000000746573743a3a6d61696e00000500000018000000180000000b00000064676e646963746174696f6e0000000006000000200000001000000001000000646f6f72000000001000000002000000726f6f6d00000000020000007c02000010000000010000006c696768747300000c000000020000006f6e00000c000000030000006f6666000c0000000400000064696d001000000005000000636f6f6c000000001000000006000000726169736500000010000000070000006c6f7765720000000c000000080000007468650010000000090000006865617400000000140000000a00000074656d706572617475726500140000000b0000006c696768747320696e000000100000000c00000073686f7700000000180000000d0000006f7574736964652063616d6572610000140000000e00000063616d657261206f6e650000140000000f00000063616d6572612074776f00000c000000100000006973000018000000110000006c61756e64727920646f6e65000000001800000012000000646f206d79206c61756e6472790000000c00000013000000696e000010000000140000006f70656e0000000010000000150000006c6f636b000000001000000016000000636c6f73650000001000000017000000646f6f72000000001400000018000000616c6c20646f6f72730000001400000019000000776861742077696c6c000000100000001a0000007768617427730000100000001b0000007768617420697300140000001c0000007468652077656174686572000c0000001d000000626500000c0000001e00000061740000200000001f00000068617320746865206d61696c6d616e20636f6d65000000000c00000020000000796574001c00000021000000686173206d61696c20617272697665640000000014000000220000006d61696c2068657265000000100000002300000066656564000000000c000000240000006361740010000000250000006b6974747900000003000000a805000068000000010000000100000001000000010000000200000001000000010000000300000001000000010000000200000003000000020000000300000003000000020000000200000002000000010000000300000004000000020000000200000002000000010000002000000002000000010000000100000006000000010000000200000001000000200000000300000001000000010000000600000002000000020000000100000098000000040000000100000001000000010000000200000003000000050000000100000001000000010000000200000003000000060000000300000007000000020000000200000001000000040000000300000008000000020000000400000001000000020000000300000009000000030000000a0000000200000002000000020000000100000002000000020000000200000001000000f000000005000000010000000100000001000000020000000100000001000000040000000100000001000000020000000100000001000000030000000b000000010000000400000003000000080000000200000004000000040000000300000002000000010000000100000001000000010000000400000003000000080000000200000004000000040000000300000001000000040000000300000001000000020000000400000002000000010000000200000002000000020000000100000001000000010000000400000003000000040000000100000002000000010000000200000002000000020000000100000048000000060000000100000001000000030000000c0000000100000002000000030000000d000000030000000e000000030000000f00000002000000020000000200000001000000680000000700000001000000010000000100000002000000010000000100000003000000100000000100000004000000030000000800000002000000040000000300000011000000020000000100000003000000120000000200000002000000020000000100000070000000080000000100000001000000010000000200000001000000010000000400000004000000030000001300000001000000040000000300000008000000020000000400000004000000030000000200000001000000040000000400000002000000020000000200000001000000900000000900000001000000010000000100000002000000030000001400000003000000150000000300000016000000020000000200000001000000020000000100000001000000010000000400000003000000080000000200000004000000040000000200000003000000170000000200000001000000030000001800000002000000020000000200000001000000800000000a000000010000000100000001000000020000000300000019000000030000001a000000030000001b0000000200000002000000030000001c0000000100000004000000030000001d00000002000000040000000100000004000000030000001e0000000200000004000000040000000b0000000200000001000000980000000c000000010000000100000001000000020000000100000001000000030000001f00000001000000040000000300000020000000020000000400000002000000010000000300000021000000010000000100000003000000100000000100000004000000030000000800000002000000040000000300000022000000020000000100000002000000020000000200000001000000580000000d0000000100000001000000030000002300000001000000040000000300000008000000020000000400000001000000020000000300000024000000030000002500000002000000020000000200000001000000580000000e000000010000000200000004000000050000000400000006000000040000000700000004000000080000000400000009000000040000000a000000040000000c000000040000000d0000000200000002000000'''.strip().decode('hex')

start = time.time()
print call({
    'cmd': 'g.load',
    'name': 'test',
    'data': bson.binary.Binary(cfg),
    'main_rule': 'test::main',
})
print call({'cmd': 'g.listset', 'name': 'test', 'list': 'door', 'items': ['front', 'side', 'garage', 'back', 'patio', 'french']})
print call({'cmd': 'g.listset', 'name': 'test', 'list': 'room', 'items': ['kitchen', 'bedroom', 'living room', 'dining room']})
# print call({'cmd': 'g.listset', 'name': 'test', 'list': 'list', 'items': sys.argv[1:]})
print call({'cmd': 'g.update', 'name': 'test', 'enabled': True})
print time.time() - start
# print call({'cmd': 'g.update', 'name': 'test', 'enabled': False, 'exclusive': True, 'priority': 0})
